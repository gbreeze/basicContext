"use strict";!function(t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):window[t]=n()}("basicContext",function(){var t=!0,n=null,e="item",i="separator",o=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+t)},l=function(t){return t.sourceCapabilities?t.sourceCapabilities.firesTouchEvents:"ontouchstart"in document.documentElement},r=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=0===Object.keys(t).length;return n===!0&&(t.type=i),null==t.type&&(t.type=e),null==t["class"]&&(t["class"]=""),t.visible!==!1&&(t.visible=!0),null==t.icon&&(t.icon=null),null==t.title&&(t.title="Undefined"),t.disabled!==!0&&(t.disabled=!1),t.disabled===!0&&(t["class"]+=" basicContext__item--disabled"),null!=t.fn||t.type===i||t.disabled!==!1||(console.warn("Missing fn for item '"+t.title+"'"),!1)},a=function(t,n){var o="",l="";return r(t)===!1?"":t.visible===!1?"":(t.num=n,null!==t.icon&&(l="<span class='basicContext__icon "+t.icon+"'></span>"),t.type===e?o="\n\t\t       <tr class='basicContext__item "+t["class"]+"' data-num='"+t.num+"'>\n\t\t           <td class='basicContext__data'>"+l+t.title+"</td>\n\t\t       </tr>\n\t\t       ":t.type===i&&(o="\n\t\t       <tr class='basicContext__item basicContext__item--separator'></tr>\n\t\t       "),o)},c=function(t){var n="";return n+="\n\t        <div class='basicContextContainer'>\n\t            <div class='basicContext'>\n\t                <table>\n\t                    <tbody>\n\t        ",t.forEach(function(t,e){return n+=a(t,e)}),n+="\n\t                    </tbody>\n\t                </table>\n\t            </div>\n\t        </div>\n\t        "},u=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==n.x||null==n.y)){var e=t.changedTouches;null!=e&&e.length>0&&(n.x=e[0].clientX,n.y=e[0].clientY)}return(null==n.x||n.x<0)&&(n.x=0),(null==n.y||n.y<0)&&(n.y=0),n},s=function(t,n){var e=u(t),i=e.x,o=e.y,r={width:window.innerWidth,height:window.innerHeight},a={width:n.offsetWidth,height:n.offsetHeight};l(t)?(i-=a.width,o-=a.height,i<0&&(i=0),o<0&&(o+=a.height)):(i+a.width>r.width&&(i-=i+a.width-r.width),o+a.height>r.height&&(o-=o+a.height-r.height)),a.height>r.height&&(o=0,n.classList.add("basicContext--scrollable"));var c=e.x-i,s=e.y-o;return{x:i,y:o,rx:c,ry:s}},d=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return null!=t.fn&&(t.visible!==!1&&(t.disabled!==!0&&(o("tr[data-num='"+t.num+"']").onclick=t.fn,o("tr[data-num='"+t.num+"']").oncontextmenu=t.fn,!0)))},f=function(e,i,r,a){var u=c(e);document.body.insertAdjacentHTML("beforeend",u),null==n&&(n=document.body.style.overflow,document.body.style.overflow="hidden");var f=o();l(i)&&f.classList.add("touch");var h=s(i,f);return f.style.left=h.x+"px",f.style.top=h.y+"px",f.style.transformOrigin=h.rx+"px "+h.ry+"px",f.style.opacity=1,null==r&&(r=y),f.parentElement.onclick=r,f.parentElement.oncontextmenu=r,e.forEach(d),t&&document.body.addEventListener("touchmove",r),"function"==typeof i.preventDefault&&i.preventDefault(),"function"==typeof i.stopPropagation&&i.stopPropagation(),"function"==typeof a&&a(),!0},h=function(){var t=o();return null!=t&&0!==t.length},y=function v(e){if(h()===!1)return!1;e.preventDefault();var i=document.querySelector(".basicContextContainer");return i.parentElement.removeChild(i),null!=n&&(document.body.style.overflow=n,n=null),t&&document.body.removeEventListener("touchmove",v),!0};return{ITEM:e,SEPARATOR:i,show:f,visible:h,close:y,closeOnTouchMove:t}});